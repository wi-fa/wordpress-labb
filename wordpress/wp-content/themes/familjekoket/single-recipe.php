<?php get_header(); ?>

<!-- Singel recept sida -->
<div class="page-container">
    <article class="recipe-layout" data-post-id="<?php echo get_the_ID(); ?>">
        <!-- Breadcrumbs -->
        <nav class="breadcrumbs">
            <a href="<?php echo home_url(); ?>">
                Hem
            </a>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 18l6-6-6-6" />
            </svg>
            <a href="<?php echo esc_url(get_post_type_archive_link('recipe')); ?>">Recept</a>
            <?php
            $categories = get_the_terms(get_the_ID(), 'recipe_category');
            if (!empty($categories) && !is_wp_error($categories)) :
                $category = $categories[0];
            ?>
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M9 18l6-6-6-6" />
                </svg>
                <a href="<?php echo esc_url(get_term_link($category)); ?>"><?php echo esc_html($category->name); ?></a>
            <?php endif; ?>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 18l6-6-6-6" />
            </svg>
            <span class="current"><?php the_title(); ?></span>
        </nav>

        <!-- Header -->
        <div class="recipe-header">
            <div class="recipe-info">
                <h1 class="recipe-title"><?php the_title(); ?></h1>

                <!-- Författare och inläggets datum -->
                <span class="author-date">
                    <?php echo get_the_author(); ?> / <?php echo date_i18n('j M Y', strtotime(get_the_date())); ?>
                </span>

                <!-- Recept meta (tillagningstid, portioner) -->
                <div class="recipe-meta">
                    <?php if (get_field('cooking_time')) : ?>
                        <span class="meta-item">
                            <svg width="22" height="22" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="#000000">
                                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                                <g id="SVGRepo_iconCarrier">
                                    <path d="M12 13h4v1h-5V7h1zM9 2h6V1H9zm13.65 3.916l-2.176 2.177A9.8 9.8 0 1 1 17.6 4.965l2.049-2.049zM12 4.2a8.8 8.8 0 1 0 8.8 8.8A8.81 8.81 0 0 0 12 4.2zm9.236 1.716L19.65 4.33l-1.086 1.086 1.586 1.586z"></path>
                                    <path fill="none" d="M0 0h24v24H0z"></path>
                                </g>
                            </svg>
                            <span><?php echo get_field('cooking_time'); ?></span>
                        </span>
                    <?php endif; ?>

                    <?php if (get_field('servings')) : ?>
                        <span class="meta-item">
                            <svg width="24" height="24" fill="#000000" height="200px" width="200px" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 60 60" xml:space="preserve">
                                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                                <g id="SVGRepo_iconCarrier">
                                    <g>
                                        <path d="M18.35,20.805c0.195,0.195,0.451,0.293,0.707,0.293c0.256,0,0.512-0.098,0.707-0.293c0.391-0.391,0.391-1.023,0-1.414 c-1.015-1.016-1.015-2.668,0-3.684c0.87-0.87,1.35-2.026,1.35-3.256s-0.479-2.386-1.35-3.256c-0.391-0.391-1.023-0.391-1.414,0 s-0.391,1.023,0,1.414c0.492,0.492,0.764,1.146,0.764,1.842s-0.271,1.35-0.764,1.842C16.555,16.088,16.555,19.01,18.35,20.805z"></path>
                                        <path d="M40.35,20.805c0.195,0.195,0.451,0.293,0.707,0.293c0.256,0,0.512-0.098,0.707-0.293c0.391-0.391,0.391-1.023,0-1.414 c-1.015-1.016-1.015-2.668,0-3.684c0.87-0.87,1.35-2.026,1.35-3.256s-0.479-2.386-1.35-3.256c-0.391-0.391-1.023-0.391-1.414,0 s-0.391,1.023,0,1.414c0.492,0.492,0.764,1.146,0.764,1.842s-0.271,1.35-0.764,1.842C38.555,16.088,38.555,19.01,40.35,20.805z"></path>
                                        <path d="M29.35,14.805c0.195,0.195,0.451,0.293,0.707,0.293c0.256,0,0.512-0.098,0.707-0.293c0.391-0.391,0.391-1.023,0-1.414 c-1.015-1.016-1.015-2.668,0-3.684c0.87-0.87,1.35-2.026,1.35-3.256s-0.479-2.386-1.35-3.256c-0.391-0.391-1.023-0.391-1.414,0 s-0.391,1.023,0,1.414c0.492,0.492,0.764,1.146,0.764,1.842s-0.271,1.35-0.764,1.842C27.555,10.088,27.555,13.01,29.35,14.805z"></path>
                                        <path d="M25.345,28.61c0.073,0,0.147-0.008,0.221-0.024c1.438-0.324,2.925-0.488,4.421-0.488c0.004,0,0.008,0,0.013,0h0 c0.552,0,1-0.447,1-0.999c0-0.553-0.447-1.001-1-1.001c-0.004,0-0.009,0-0.014,0c-1.643,0-3.278,0.181-4.86,0.537 c-0.539,0.121-0.877,0.656-0.756,1.195C24.476,28.295,24.888,28.61,25.345,28.61z"></path>
                                        <path d="M9.821,45.081c0.061,0.012,0.121,0.017,0.18,0.017c0.474,0,0.895-0.338,0.983-0.82c1.039-5.698,4.473-10.768,9.186-13.56 c0.475-0.281,0.632-0.895,0.351-1.37c-0.282-0.475-0.895-0.632-1.37-0.351c-5.204,3.083-8.992,8.661-10.134,14.921 C8.917,44.462,9.277,44.982,9.821,45.081z"></path>
                                        <path d="M55.624,43.721C53.812,33.08,45.517,24.625,34.957,22.577c0.017-0.16,0.043-0.321,0.043-0.48c0-2.757-2.243-5-5-5 s-5,2.243-5,5c0,0.159,0.025,0.32,0.043,0.48C14.483,24.625,6.188,33.08,4.376,43.721C2.286,44.904,0,46.645,0,48.598 c0,5.085,15.512,8.5,30,8.5s30-3.415,30-8.5C60,46.645,57.714,44.904,55.624,43.721z M27.006,22.27 C27.002,22.212,27,22.154,27,22.098c0-1.654,1.346-3,3-3s3,1.346,3,3c0,0.057-0.002,0.114-0.006,0.172 c-0.047-0.005-0.094-0.007-0.14-0.012c-0.344-0.038-0.69-0.065-1.038-0.089c-0.128-0.009-0.255-0.022-0.383-0.029 c-0.474-0.026-0.951-0.041-1.432-0.041s-0.958,0.015-1.432,0.041c-0.128,0.007-0.255,0.02-0.383,0.029 c-0.348,0.024-0.694,0.052-1.038,0.089C27.1,22.263,27.053,22.264,27.006,22.27z M26.399,24.368 c0.537-0.08,1.077-0.138,1.619-0.182c0.111-0.009,0.222-0.017,0.333-0.025c1.098-0.074,2.201-0.074,3.299,0 c0.111,0.008,0.222,0.016,0.333,0.025c0.542,0.044,1.082,0.102,1.619,0.182c10.418,1.575,18.657,9.872,20.152,20.316 c0.046,0.321,0.083,0.643,0.116,0.965c0.011,0.111,0.026,0.221,0.036,0.332c0.039,0.443,0.068,0.886,0.082,1.329 c-15.71,3.641-32.264,3.641-47.974,0c0.015-0.443,0.043-0.886,0.082-1.329c0.01-0.111,0.024-0.221,0.036-0.332 c0.033-0.323,0.07-0.645,0.116-0.965C7.742,34.24,15.981,25.942,26.399,24.368z M30,55.098c-17.096,0-28-4.269-28-6.5 c0-0.383,0.474-1.227,2.064-2.328c-0.004,0.057-0.002,0.113-0.006,0.17C4.024,46.988,4,47.54,4,48.098v0.788l0.767,0.185 c8.254,1.98,16.744,2.972,25.233,2.972s16.979-0.991,25.233-2.972L56,48.886v-0.788c0-0.558-0.024-1.109-0.058-1.658 c-0.004-0.057-0.002-0.113-0.006-0.17C57.526,47.371,58,48.215,58,48.598C58,50.829,47.096,55.098,30,55.098z"></path>
                                    </g>
                                </g>
                            </svg>
                            <span><?php echo get_field('servings'); ?> portioner</span>
                        </span>
                    <?php endif; ?>


                    <!-- Print alternatic -->
                    <div class="recipe-actions">
                        <button class="action-button print">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M6 9V2h12v7M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2" />
                                <path d="M6 14h12v8H6z" />
                            </svg>
                            Skriv ut
                        </button>
                    </div>
                </div>

                <!-- Kategori labels -->
                <div class="category">
                    <?php
                    $categories = get_the_terms(get_the_ID(), 'recipe_category');
                    if ($categories) :
                        foreach ($categories as $category) {
                    ?>
                            <span class="category-tag"><?php echo $category->name; ?></span>
                    <?php
                        }
                    endif;
                    ?>
                </div>

                <!-- Beskrivning av rätten -->
                <?php if (get_field('description')) : ?>
                    <div class="recipe-description">
                        <?php echo get_field('description'); ?>
                    </div>
                <?php endif; ?>
            </div>

            <div class="recipe-image">
                <?php if (has_post_thumbnail()) : ?>
                    <?php the_post_thumbnail('large'); ?>
                <?php endif; ?>
            </div>
        </div>

        <!-- Ingredienser och instruktioner -->
        <div class="recipe-content">
            <div class="ingredients">
                <h2>
                    <svg fill="#000000" width="26" height="26" viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                        <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                        <g id="SVGRepo_iconCarrier">
                            <path d="M26 3 A 1.0001 1.0001 0 0 0 25 4L25 7.6972656L21.167969 13.445312 A 1.0001 1.0001 0 0 0 21.166016 13.447266 A 1.0001 1.0001 0 0 0 21.130859 13.505859 A 1.0001 1.0001 0 0 0 21.111328 13.542969 A 1.0001 1.0001 0 0 0 21.105469 13.558594 A 1.0001 1.0001 0 0 0 21.037109 13.732422 A 1.0001 1.0001 0 0 0 21.033203 13.748047 A 1.0001 1.0001 0 0 0 21.017578 13.816406 A 1.0001 1.0001 0 0 0 21.003906 13.90625 A 1.0001 1.0001 0 0 0 21.003906 13.914062 A 1.0001 1.0001 0 0 0 21 14 A 1.0001 1.0001 0 0 0 21 14.011719L21 20L5 20 A 1.0001 1.0001 0 0 0 4 21L4 45 A 1.0001 1.0001 0 0 0 5 46L14.275391 46C15.040306 46.872658 15.962077 47.569588 16.976562 48.027344C19.557836 49.192064 22.896153 48.926876 25.537109 46.894531 A 1.0001 1.0001 0 0 0 26 47L39 47L45 47 A 1.0001 1.0001 0 0 0 46 46L46 14 A 1.0001 1.0001 0 0 0 45.894531 13.552734L43 7.7636719L43 4 A 1.0001 1.0001 0 0 0 42 3L26 3 z M 27 5L41 5L41 7L27 7L27 5 z M 26.535156 9L40.382812 9L38.382812 13L23.869141 13L26.535156 9 z M 42 10.236328L44 14.236328L44 45L40 45L40 14.236328L42 10.236328 z M 23 15L38 15L38 45L27.378906 45C27.836847 44.384682 28.253606 43.697922 28.605469 42.917969C29.82748 40.209741 30.243093 37.066535 29.869141 34.294922C29.495189 31.523309 28.310947 29.004254 26.023438 27.972656C25.451584 27.714611 24.856442 27.571327 24.248047 27.523438C23.836595 27.49105 23.419451 27.509295 23 27.560547L23 21L23 15 z M 6 22L21 22L21 28 A 1.0001 1.0001 0 0 0 21.003906 28.082031C20.230505 28.384537 19.468236 28.786964 18.740234 29.273438C16.41485 30.827333 14.331355 33.219577 13.109375 35.927734C11.755522 38.92815 11.922502 41.766212 12.96875 44L6 44L6 22 z M 24.064453 29.527344C24.475261 29.553208 24.857775 29.64192 25.201172 29.796875C26.574663 30.416278 27.567171 32.19216 27.886719 34.560547C28.206267 36.928934 27.832189 39.770931 26.783203 42.095703C24.705876 46.700399 20.586111 47.462754 17.798828 46.205078C15.011465 44.947365 12.854414 41.353558 14.931641 36.75C15.980661 34.425157 17.864447 32.265354 19.851562 30.9375C20.845122 30.273573 21.838486 29.833234 22.755859 29.636719C23.214546 29.538461 23.653646 29.501479 24.064453 29.527344 z"></path>
                        </g>
                    </svg>
                    Ingredienser
                </h2>
                <?php if (get_field('ingredients')) : ?>
                    <div class="ingredients-list">
                        <ul>
                            <?php
                            $ingredients = get_field('ingredients');
                            $ingredients_array = explode("\n", $ingredients);
                            foreach ($ingredients_array as $ingredient) {
                                if (trim($ingredient) != '') {
                                    echo '<li>
                    <label class="ingredient-item">
                        <input type="checkbox" class="ingredient-checkbox">
                        <span class="custom-checkbox"></span>
                        <span class="ingredient-text">' . esc_html(trim($ingredient)) . '</span>
                    </label>
                </li>';
                                }
                            }
                            ?>
                        </ul>
                    </div>
                <?php endif; ?>
            </div>

            <div class="instructions">
                <h2>
                    <svg width="42" height="42" viewBox="0 0 960 960" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                        <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                        <g id="SVGRepo_iconCarrier">
                            <path d="M462.845 238.751C608.272 59.0617 868.192 314.774 663.067 453.832C704.924 520.181 781.81 677.054 694.09 733.093C607.167 785.186 506.403 830.604 403.146 821.158C325 812.109 321.856 723.932 308.217 662.877C300.22 625.03 295.954 586.416 287.25 548.769C101.408 587.657 76.9909 377.001 234.728 318.38C236.769 317.745 239.062 315.442 239.781 313.401C267.643 220.718 384.616 186.295 462.845 238.751ZM288.796 311.268C312.331 311.029 390.539 332.934 366.868 366.925C361.173 373.897 351.777 376.023 343.019 372.185C282.31 334.175 201.202 363.569 180.421 432.023C152.495 530.688 311.819 522.314 341.27 453.293C354.047 427.784 392.436 439.692 385.994 468.051C376.461 494.977 354.36 515.11 330.526 529.819C322.398 534.748 329.879 547.678 330.453 555.267C342.772 605.319 352.184 656.015 362.368 706.535C363.437 711.951 365.394 714.056 371.314 714.092C476.267 715.393 582.157 686.679 665.139 620.318C682.074 606.506 682.382 606.778 676.05 585.874C669.037 562.72 661.5 539.321 645.279 521.079C634.337 508.774 627.466 494.672 619.605 480.831C617.704 475.995 615.641 473.912 610.004 475.559C584.884 481.766 559.344 481.874 533.839 478.799C503.39 475.193 506.238 431.905 537.379 432.277C630.447 449.229 729.016 368.391 677.307 276.05C642.017 220.903 552.954 200.795 501.027 260.169C486.978 270.728 527.809 295.239 521.637 350.894C520.631 364.004 510.23 373.559 498.196 373.485C483.931 373.68 473.486 359.363 474.587 344.811C470.776 252.698 328.94 231.236 288.796 311.268ZM684.879 638.7C591.409 707.765 486.884 739.793 371.296 739.368C398.406 826.971 571.138 744.162 626.436 719.785C658.685 704.126 690.885 679.298 684.879 638.7Z" fill="#000000"></path>
                            <path d="M99.5719 757.195C73.8529 757.242 68.6569 729.975 85.2559 716.192C117.465 690.775 145.362 658.216 182.179 639.502C200.43 630.953 217.2 652.783 205.874 668.819C180.098 698.678 146.377 721.205 117.498 748.097C111.428 753.336 105.009 757.417 99.5719 757.195Z" fill="#000000"></path>
                            <path d="M907.398 446.191C906.987 453.105 902.253 459.639 894.58 463.911C862.054 482.021 829.522 500.127 796.803 517.885C782.966 525.395 771.698 523.523 765.623 513.784C754.02 496.642 779.704 479.261 794.467 471.224C819.303 456.327 844.135 441.412 869.252 426.999C885.474 416.421 908.413 422.681 907.398 446.191Z" fill="#000000"></path>
                            <path d="M359.597 150.197C359.69 161.116 354.812 168.556 346.897 171.389C338.937 174.238 330.015 171.911 324.464 165.115C307.245 136.189 294.732 104.402 279.444 74.3576C264.783 46.1146 304.559 25.1176 318.492 54.1146C332.119 85.8096 349.112 117.53 359.597 150.197Z" fill="#000000"></path>
                            <path d="M871.006 775.347C870.901 797.017 845.223 801.927 830.057 789.629C817.515 782.723 804.977 775.808 792.524 768.742C781.64 763.583 772.183 753.015 777.495 740.412C780.346 732.76 787.793 727.68 796.351 728.116C819.265 731.488 838.859 746.885 859.808 756.174C867.393 760.174 871.034 767.422 871.006 775.347Z" fill="#000000"></path>
                            <path d="M734.891 192.242C689.425 186.564 729.513 140.188 740.813 119.716C757.112 95.5671 793.141 119.582 777.277 144.12C767.279 156.921 751.399 192.109 734.891 192.242Z" fill="#000000"></path>
                            <path d="M328.049 919.198C310.014 919.008 299.148 902.379 306.568 887.487C311.809 876.969 318.982 867.236 326.383 858.029C332.323 850.639 341.939 849.477 349.567 853.292C357.393 857.206 362.558 866.125 359.623 875.324C355.83 887.211 350.574 898.765 344.715 909.808C341.144 916.537 333.862 919.195 328.049 919.198Z" fill="#000000"></path>
                            <path d="M95.6653 353.486C85.8563 352.297 73.5083 347.107 62.0593 340.351C52.8403 334.911 50.1533 323.234 54.2593 314.004C66.3913 287.797 95.5173 308.074 112.676 317.575C131.644 330.888 121.348 356.419 95.6653 353.486Z" fill="#000000"></path>
                            <path d="M288.794 311.265C328.944 231.254 470.772 252.672 474.586 344.809C473.47 359.384 483.942 373.653 498.194 373.48C510.228 373.555 520.629 364 521.637 350.889C527.793 294.788 487.029 271.312 501.022 260.166C552.95 200.791 642.014 220.899 677.306 276.05C728.878 368.554 630.622 449.123 537.373 432.269C506.163 431.905 503.458 475.211 533.837 478.796C559.341 481.871 584.88 481.763 610.001 475.555C615.525 473.886 617.827 476.019 619.6 480.828C627.462 494.668 634.333 508.771 645.275 521.076C661.497 539.318 669.033 562.717 676.046 585.871C682.378 606.775 682.069 606.503 665.134 620.313C582.167 686.682 476.251 715.387 371.31 714.09C365.389 714.053 363.432 711.948 362.363 706.532C351.712 649.227 338.509 592.394 326.628 535.398C326.431 533.671 328.685 530.912 330.522 529.815C354.344 515.119 376.465 494.967 385.991 468.048C392.47 439.665 353.972 427.814 341.27 453.294C311.837 522.311 152.461 530.68 180.411 432.015C201.22 363.581 282.277 334.151 343.017 372.185C351.774 376.02 361.168 373.894 366.863 366.921C390.517 333.054 312.611 311.051 288.794 311.265Z" fill="white"></path>
                            <path d="M684.88 638.699C690.86 679.309 658.709 704.115 626.435 719.779C571.164 744.104 398.557 827.017 371.297 739.367C486.885 739.792 591.41 707.764 684.88 638.699Z" fill="white"></path>
                        </g>
                    </svg>
                    Gör så här
                </h2>
                <?php if (get_field('instructions')) : ?>
                    <div class="instructions-list">
                        <?php
                        $instructions = get_field('instructions');
                        $steps = explode("\n", $instructions);
                        echo '<ol>';
                        foreach ($steps as $index => $step) {
                            if (trim($step) != '') {
                                echo '<li>' . esc_html(trim($step)) . '</li>';
                            }
                        }
                        echo '</ol>';
                        ?>
                    </div>
                <?php endif; ?>
            </div>
        </div>
    </article>
</div>

<?php get_footer(); ?>